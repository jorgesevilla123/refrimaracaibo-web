
<app-cart-overview>



<div style="display: inline-flex;">

    <app-main-search-bar></app-main-search-bar>




    <mat-form-field appearance="outline" class="filter-form">
        <mat-label>Filtrar</mat-label>
        <mat-select [formControl]="filters" multiple>
            <!-- <mat-select-trigger>
                {{filters.value?.[0].label_value || ''}}
                <span *ngIf="(filters.value?.length || 0) > 1">
                    (+{{(filters.value?.length || 0) -1}} {{filters.value?.length === 2 ? 'otro': 'otros'}})
                </span>
            </mat-select-trigger> -->
            <mat-option *ngFor="let category of categories" [value]="category" >
                <span><b>{{category.label_name}}</b></span> | <span>{{category.label_value}}</span>
            </mat-option>
        </mat-select>
        <mat-icon matSuffix>filter_alt</mat-icon>
    </mat-form-field>


    
    <mat-form-field appearance="outline" class="filter-form">
        <mat-label>Filtrar por marcar</mat-label>
        <mat-select [formControl]="filters" multiple>
            <!-- <mat-select-trigger>
                {{filters.value?.[0].label_value || ''}}
                <span *ngIf="(filters.value?.length || 0) > 1">
                    (+{{(filters.value?.length || 0) -1}} {{filters.value?.length === 2 ? 'otro': 'otros'}})
                </span>
            </mat-select-trigger> -->
            <mat-option *ngFor="let category of categories" [value]="category" >
                <span><b>{{category.label_name}}</b></span> | <span>{{category.label_value}}</span>
            </mat-option>
        </mat-select>
        <mat-icon matSuffix>filter_alt</mat-icon>
    </mat-form-field>





</div>


<h3 style="margin-left: 10px;"><b>{{resultsLength}}</b> resultados para la busqueda para <b>{{query}}</b>: </h3>



           
<mat-grid-list rowHeight="350px" cols="3">
   

        
    
    <mat-grid-tile *ngFor="let product of products">

        <!-- this is the product card -->
        <div style="width: 250px" class="products-ui" >
          

            <div class="image">
                <img class="products-img" 
                    [src]="product.imagePath" alt="">

            </div>

            <div>
                
            <h4 class="product-title">{{product.title}}</h4>
            <h2 style="color: rgb(1, 157, 1);">{{product.precio | currency: 'USD'}}</h2>

            
            <div *ngIf="checkCart(product); then isInCart else notInCart"></div>



            <ng-template #isInCart>
                <button class="cart-button" mat-stroked-button style="background-color: red" (click)="removeFromCart(product)">
                    Eliminar del carrito <mat-icon>delete</mat-icon>
                    </button>
            </ng-template>




            <ng-template #notInCart>
                <button class="cart-button"  style="background-color: dodgerblue;" mat-stroked-button (click)="addToCart(product)">
                    Agregar a carrito <mat-icon>add_shopping_cart</mat-icon>
                </button>
            </ng-template>
            

            </div>

          
         
        </div>
    </mat-grid-tile>

</mat-grid-list>





<div *ngIf="!completed; else paginator">
    <h2>load</h2>
    
</div>


<ng-template #paginator>
    <app-pagination [isMobile]="isMobile" [currentPage]="currentPage" [pager]="pager" [query]="query"></app-pagination>
</ng-template>





    

</app-cart-overview>


